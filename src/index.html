<!doctype html>
<html>
  <head>
    <title><%= json.project.title %></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href='http://fonts.googleapis.com/css?family=Oswald:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <%= t.include("partials/_adHead.html") %>
  </head>

  <body ng-app="top-companies">
    <div class="fixed-frame"></div>

    <main class="scroll">
      <header class="intro">
        <nav class="logo-bar">
          <a class="logo" href="http://seattletimes.com">
            <img src="./assets/st-logo.png">
          </a>
        </nav>

        <div class="contents">

          <h1>TOP NORTHWEST COMPANIES 2015</h1>

          <p>
            1st 2nd 3d 4th 5th Chart
            <a class="share"></a>
          </p>

          <p class="instructions">
            <i class="fa fa-chevron-down"></i>
            Scroll to continue
            <i class="fa fa-chevron-down"></i>
        </div>
      </header>

      <% json.BestOfTheNW2015_Top5.sort(function(a, b) { return a.rank - b.rank }).forEach(function(company, i) { %>
        <section class="parallax-play" data-index="<%= i %>">
        <img src="assets/<%= company.image %>" class="fixable">
        <div class="description <%= company.overlay %>">
          <h3 class="rank"><%= company.rank %> -- <%= company.company %></h3>

          <div class="copy">
            <p class="chatter"><%= company.chatter %></p>

            <div>
              <h2>Headquarters</h2>
              <p><%= company.headquarters %>
            </div>
            
            <div>
              <h2>CEO</h2>
              <p><%= company.ceo %>
            </div>
            
            <div>
              <h2>Employees in 2014</h2>
              <p><%= company.employees %>
            </div>

            <div>
              <h2>What It Does</h2>
              <p><%= company.whatitdoes %>
            </div>

            <div>
              <h2>What sets it apart</h2>
              <p><%= company.setsapart %>
            </div>

            <div>
              <h2>2014 Cash flow</h2>
              <p><%= company.cashflow %>
            </div>
            
            <div>
              <h2>2014 Sales</h2>
              <p><%= company.sales %>
            </div>

            <a class="read-more" href="<%= company.story %>">
              Read story by tktkt &rarr;</i>
            </a>
          </div>
          <div class="credit">
            Photo by <%= company.photographer %> / <%= company.publication %>
          </div>
        </div>
      </section>
      <% }) %>

    </main>

    <aside class="no-mobile-portrait">
      <a class="ok" href="javascript:;">
        <i class="fa fa-times-circle-o"></i>
      </a>
      Hey! This page is designed to look best in landscape mode. Rotate your device to see for yourself.
      <i class="fa fa-rotate-left rotation"></i>
    </aside>


    <!-- ####################### -->


    <div class="chart" ng-controller="CompanyController" ng-cloak>
      <div class="hed">How Northwest companies compare</div>
      
      <div class="inner">
        <p>No single yardstick would be a fair gauge to rank the Northwest's publicly traded companies. We picked five measures of corporate performance — return on invested capital, free cash-flow yield, stock-price appreciation, revenue growth and dividend yield — then combined them into a single ranking using our proprietary formula. Read more about our methodology.
        <p><strong>TO USE THE CHART:</strong> Click on a column to sort the chart, or filter by industry. The last column graphs the last five years of data for each company; you can select more options to graph from the dropdown menu. All columns are for fiscal year 2014, except where otherwise noted. Stock prices are year-end (Dec. 31). Cells marked "NM" are "not meaningful."

        <div>
          <label class="filter">Filter by industry:</label>
          <select ng-model="filterBy">
            <option value="all">All Industries</option>
            <option ng-repeat="industry in industries" value="{{industry}}">{{industry}}</option>
          </select>
        </div>

        <table>
          <thead>
            <th ng-repeat="header in headers" ng-click="sortTable(header)" class="{{header.short}}" ng-class="{left: header.short == 'company', up: lastSort == header && sortOrder == -1, down: lastSort == header && sortOrder == 1}">
              {{header.title}}
            </th>
          </thead>

          <tr ng-repeat="company in companies | filter:industryFilter">
            <td class="rank">{{company.rank}}
              <span ng-if="company.rank - company.prev > 0">
                <i class="fa fa-caret-down"></i>
                <div class="tooltip">Previous rank: {{company.prev}}</div>
              </span>
              <span ng-if="company.rank - company.prev < 0">
                <i class="fa fa-caret-up"></i>
                <div class="tooltip">Previous rank: {{company.prev}}</div>
              </span>
              <span ng-if="company.prev == company.rank">
                &ndash;
                <div class="tooltip">Previous rank: {{company.prev}}</div>
              </span>
              <span ng-if="company.prev == 'NR'">
                &ndash;
                <div class="tooltip">Previous rank: N/A</div>
              </span>
            <td class="company">
              {{company.company}}
              <div class="symbol">{{company.symbol}}</div>
            <td class="industry">
              <img src="./assets/icon_{{company.icon}}.jpg">
              <div class="tooltip">{{company.industry}}</div>
            <td class="roic">{{company.roic}}
            <td class="marketcap">{{company.marketcap}}
            <td class="freecashflow">{{company.freecashflow}}
            <td class="sales">{{company.sales}}
            <td class="profits">{{company.profits}}
            <td class="profitlossperc">{{company.profitlossperc}}
            <td class="roa">{{company.roa}}
            <td class="employees">{{company.employees}}
            <td class="peyoy">{{company.peyoy}}
          </tr>
        </table>

        <div class="credits">
          <div><strong>Reporter:</strong> Jon Talton</div>
          <div><strong>Editor:</strong> Becky Bisbee</div>
          <div><strong>Photographer:</strong> tktktk</div>
          <div><strong>Web designer:</strong> tktktk</div>
          <div><strong>Web developer:</strong> Audrey Carlsen</div>
          <div><strong>Data sources:</strong> tktktk</div>
        </div>
      </div>

      <footer>
        <a class="logo" href="http://seattletimes.com">
          <img src="./assets/st-logo.png">
        </a>
        <a class="share-bottom"></a>
      </footer>
    </div>


    <script>
      var companyData = <%= JSON.stringify(csv.big_chart) %>
    </script>
    <script src="app.js"></script>
    <% if (json.project.production) { %>
    <%= !json.project.embedded ? t.include("partials/_adFoot.html") : "" %>
    <%= t.include("partials/_workHere.html") %>
    <% } %>
  </body>
</html>
